%------------------------
% Get 2.95 Liters and above with this data.
readVal=[509,513,513,515,516,518,519,522,525,527,532,535,539,543,546,550,554,559,562,566,571,575,582,587,595,601,608,610,614,621,625,631,633,640,644,647,650,652,651,652,652,651,653,657,658,657,656,657,658,659,658,656,656,657,657,655,655,653,654,654,652,645,638,630,628,632,595,511,511,489,501,519,515,512,507,506,509,510,511,510,509,509,509,510,510,509,509,509,510,509,509,509,509,509,511,510,509,510,509,510,510,509,510,510,510,510,509,509,509,510,510,509,510,509,510,510,509,510,509,509,509,509,510,509,510,509,510,510,509,509,509,510,510,510,510,509,509,509,509,509,509,510,509,510,510,510,510,510,509,509,509,509,510,509,509,510,510,510,510,510,510,509,510,509,510,509,509,510,509,509,509,510,509,509,510,509,510,509,510,510,510,510,510,509,509,509,510,510,509,509,510,510,509,509,510,509,509,509,509,510,510,509,509,509,510,509,509,509,510,509,510,509,509,510,510,509,511,509,510,510,509,509,510,510,509,510,510,509,510,510,510,509,509,510,510,509,509,509,510,509,510,509,509,509,510,510,510,509,509,510,509,510,510,509,510,510,509,509,509,509,510,509,509,509,510,509,509,509,509,509,509,509,509,509,509,510,509,510,509,509,509,509,509,509,510,510,509,509,510,510,509,509,509,509,509,509,510,509,509,509,509,510,509,510,510,510,509,509,509,509,509,509,510,510,510,509,509,509,509,509,509,510,510,510,509,510,509,509,510,509,510,509,509,509,510,510,509,509,509,509,509,509,510,509,509,509,509,510,509,509,509,509,509,510,509,510,509,509,510,509,509,510,508,510,509,509,510,508,509,510,509,509,509,509,509,509,509,509,509,509,510,509,509,510,509,509,509,509,509,510,510,509,509,510,510,509,509,509,509,510,509,510,509,509,509,509,509,510,509,510,509,509,510,509,509,510,510,509,510,509,509,509,509,509,510,509,509,509,509,510,509,509,509,509,509,509,510,510,509,509,509,509,509,509,510,509,509,509,509,509,509,510,509,509,509,509,510,508,509,509,509,509,510,509,510,509,510,509,509,510,510,510,510,509,510,509,510,509,509,509,509,510,510,510,509,510,510,509,510,510,510,510,510,509,509,509,509,509,510,509,510,510,510,510,510,510,510,510,510,510,509,509,510,509,510,509,509,509,509,510,509,509,510,509,510,510,509,509,509,509,509,509,509,510,509,509,510,510,510,509,510,509,509,509,509,509,509,510,509,510,509,510,509,509,509,509,509,510,510,510,509,510,509,510,511,509,509,509,509,510,509,509,509,510,510,509,510,509,509,509,509,510,510,509,510,510,509,510,509,509,510,510,509,509,509,509,510,509,509,509,509,509,510,509,509,509,510,510,510,509,510,510,509,510,509,509,510,509,510,510,509,509,510,509,509,509,509,509,509,509,509,509,509,509,510,510,509,509,510,509,510,510,509,509,509,509,510,509,509,509,510,509,509,509,509,509,509,510,510,509,509,509,509,509,508,509,509,511,509,509,509,509,509,509,509,509,509,509,509,510,509,509,509,509,510,510,509,509,509,509,510,508,509,510,510,509,510,510,509,510,510,510,510,509,510,510,510,510,508,510,509,509,509,509,509,509,510,510,509,510,509,509,510,509,510,510,509,509,510,510,510,509,509,510,509,509,510,510,509,509,509];
readVal=[509,513,513,514,514,515,516,516,516,517,518,518,519,520,521,521,523,523,523,523,524,525,525,527,528,529,530,530,531,532,533,534,535,536,536,537,538,539,540,540,540,541,541,540,541,542,541,542,543,543,543,543,543,542,543,542,541,542,542,541,541,541,541,541,540,540,541,541,541,540,541,541,541,540,541,540,539,539,538,538,538,537,537,537,537,536,536,535,536,537,537,538,538,537,537,537,538,538,537,539,539,538,538,538,539,538,538,537,537,537,537,538,537,538,539,539,539,538,537,537,536,536,537,537,539,543,458,517,525,531,519,503,504,508,511,514,512,509,508,508,510,511,511,510,509,509,510,511,510,509,509,509,509,509,509,509,509,510,509,510,509,510,509,509,510,510,509,509,509,510,509,509,510,510,509,510,510,509,510,510,509,510,510,510,510,510,509,510,510,510,510,510,509,510,509,510,510,509,510,510,509,510,510,509,510,509,510,509,510,509,510,510,509,510,509,510,509,509,510,510,510,510,509,509,509,509,510,509,509,509,510,509,509,509,510,509,510,509,510,510,510,510,509,509,510,510,510,509,510,509,509,509,509,509,510,509,509,510,509,510,510,510,509,509,510,509,510,510,509,510,510,510,509,509,509,509,510,509,510,509,510,509,509,510,509,509,509,509,510,509,509,510,509,509,509,509,509,509,510,510,510,510,509,509,509,509,509,509,509,510,509,509,509,510,509,509,510,509,509,509,509,509,509,510,510,509,509,510,508,509,509,510,509,510,509,509,510,510,509,510,509,509,510,509,509,510,509,509,509,509,509,509,509,509,509,509,510,509,509,509,510,509,509,510,510,510,509,510,509,509,509,510,509,510,509,509,510,510,510,509,510,509,509,509,510,509,509,509,509,510,509,510,510,509,510,510,510,509,509,509,510,510,509,510,510,509,509,510,509,510,510,511,509,510,510,509,509,509,510,510,509,509,510,509,509,510,509,509,510,509,510,510,510,509,509,510,509,510,510,510,510,509,509,510,510,509,509,509,509,510,509,509,509,510,509,510,509,509,510,509,509,510,509,509,509,509,510,509,510,509,509,509,510,510,509,509,510,509,509,510,509,509,510,510,511,509,510,510,509,510,509,510,509,509,510,510,509,509,510,510,510,509,509,509,510,511,512,509,510,509,509,509,510,510,509,509,509,509,510,510,510,509,510,509,510,510,509,510,509,509,509,509,510,510,510,509,509,509,511,510,510,510,509,509,509,509,509,509,509,510,509,509,510,510,509,509,509,509,509,509,509,509,510,509,510,509,510,509,510,510,509,510,509,509,509,510,509,509,510,510,510,510,510,509,510,509,509,510,509,510,510,509,509,510,510,510,510,510,510,509,509,509,509,509,509,509,509,509,510,509,509,510,510,510,509,510,510,509,509,510,509,510,509,509,510,510,510,509,510,510,510,509,509,509,510,510,509,510,510,510,510,510,509,509,510,510,510,509,510,510,509,510,510,509,509,509,509,510,510,510,511,509,509,510,510,509,510,509,510,509,510,510,509,509,510,509,509,509,509,510,509,509,510,510,510,510,510,509,509,509,509,509,510,509,510,509,510,510,509,509,510,510,509,509,509,510,509,509,509,510,509,510,510,510,510,509,509,509,509,509,509,509,510,510,509,510,510,509,509,509,510,509,509,510,509,510,510,510,509,509,510];

L = length(readVal);
cal = readVal(1);
Ts = 8.3143631436;
c3 = 2.7079365079; 

FEV_even = 0;
FEV_odd = 0;
FEV_beg_end = zeros(1,2);
FEV_beg_end(1) = bitsToflow(readVal(1),cal);        %i=1
FEV_beg_end(2) = bitsToflow(readVal(L),cal);        %i=737

%CONVERT FEV
for i = 3:2:(L - 2)                                 %i=[3,5,7,...,739]
    FEVtemp = bitsToflow(readVal(i),cal);
    FEV_even = FEV_even + FEVtemp;
end
for i = 2:2:(L - 1)                                 %i=[2,6,8,...,740]
    FEVtemp = bitsToflow(readVal(i),cal);
    FEV_odd = FEV_odd + FEVtemp;
end

%SIMPSON'S 1/3 COMPOSITE INTEGRATION
FEV6simp = FEV_beg_end(1) + 4 * FEV_odd + 2 * FEV_even + FEV_beg_end(2);
FEV6simp = FEV6simp * c3;

%EBEL'S INT
x = linspace(0,L-1,L)*Ts*10^-3; %ms
FEVtemp = zeros(1,L);
for i = 1:1:L
    FEVtemp(i) = bitsToflow(readVal(i),cal);
end 
FEVint = intdef(x,FEVtemp,x(1),x(end)); %m^3
FEVint = FEVint * 1000; %1000L/m^3

hold on
figure(1)
plot(x,readVal)%,x,fit)